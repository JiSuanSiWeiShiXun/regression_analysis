# Question 5: Fitness Data Regression Analysis

## 📋 问题概述

本项目分析健身数据，通过多个身体指标预测氧气消耗率。

**数据**：31个男性参与者的体能测试数据
**目标**：预测氧气消耗量（Y）从其他易测量的指标

## 🗂️ 文件结构

```
question5/
├── main.py                              # 完整的Python分析代码
├── 快速总结.md                          # ⭐ 快速查看：简明结果总结
├── 分析报告.md                          # 📊 详细报告：完整分析和解释
├── question5_correlation_matrix.png     # 图1：相关系数热图
├── question5_part_a_full_model.png      # 图2：(a)题完整线性模型
├── question5_part_b_selection.png       # 图3：(b)题变量选择
├── question5_part_c_quadratic.png       # 图4：(c)题二次模型
└── question5_part_d_quad_selection.png  # 图5：(d)题二次变量选择
```

## 🚀 快速开始

### 查看结果

1. **快速了解**：阅读 `快速总结.md`
2. **详细分析**：阅读 `分析报告.md`
3. **查看图表**：打开PNG图片文件

### 运行代码

```bash
# 进入目录
cd question5

# 运行分析
python main.py
```

代码会：
- 读取内置数据
- 执行所有分析（a、b、c、d四个部分）
- 生成5张图表
- 在控制台输出详细结果

## 📊 四个问题的解答

### (a) 多元线性回归模型

**模型**：`Y = β₀ + β₁X₁ + ... + β₆X₆ + ε`

**结果**：
- σ² = 5.39
- R² = 0.848
- 最重要变量：X₃（跑步时间）

**图表**：`question5_part_a_full_model.png`

---

### (b) 线性模型变量选择

**方法**：前向选择、后向消元、逐步回归

**推荐模型**（BIC准则）：
- 变量：X₃, X₁, X₅, X₆
- R² = 0.8368

**图表**：`question5_part_b_selection.png`

---

### (c) 二次回归模型

**模型**：包含所有线性项、二次项和交互项（共27个特征）

**结果**：
- σ² = 6.74
- R² = 0.976（⚠️ 过拟合）
- 调整R² = 0.763

**图表**：`question5_part_c_quadratic.png`

---

### (d) 二次模型变量选择

**最优模型**（BIC准则）：
- 3个特征：X₃, X₁×X₅, X₁×X₆
- R² = 0.8291

**图表**：`question5_part_d_quad_selection.png`

---

## 🎯 核心结论

1. **跑步时间（X₃）是最强预测因子**
   - 单独解释74.3%的变异
   - 负相关：跑得越快，氧气消耗能力越强

2. **简单模型足够有效**
   - 仅用2个变量（跑步时间+年龄）就能达到76%准确率
   - 4个变量的模型达到84%准确率

3. **复杂模型非必需**
   - 二次完整模型虽拟合完美但过拟合严重
   - 简化后的模型更实用

## 📈 推荐模型

### 方案一：标准模型（推荐）
```
变量：X₃（跑步时间）、X₁（年龄）、X₅（开始脉搏）、X₆（结束脉搏）
R² = 0.8368
准确率：84%
适用：标准健康评估
```

### 方案二：简化模型
```
变量：X₃（跑步时间）、X₁（年龄）
R² = 0.7642
准确率：76%
适用：快速筛查
```

## 📚 技术细节

### 使用的库
- numpy：数值计算
- pandas：数据处理
- matplotlib/seaborn：可视化
- scikit-learn：回归建模
- scipy：统计检验

### 分析方法
- 最小二乘法（OLS）
- 前向选择（Forward Selection）
- 后向消元（Backward Elimination）
- 逐步回归（Stepwise Regression）
- 模型选择准则：AIC、BIC、Mallows' Cp

### 模型诊断
- 残差正态性检验（Shapiro-Wilk）
- Q-Q图
- 残差vs拟合值图
- 方差齐性检验

## 📞 如何使用结果

### 实际应用示例

**场景1：健身中心快速评估**
```
只需测量：年龄、1.5英里跑步时间
使用模型：方案二（简化模型）
得到：氧气消耗能力的快速估计
```

**场景2：医疗健康评估**
```
测量：年龄、跑步时间、开始和结束脉搏
使用模型：方案一（标准模型）
得到：更准确的有氧能力评估
```

## ⚠️ 使用限制

1. **样本特征**：数据仅来自31名男性
2. **适用人群**：不能直接推广到女性或儿童
3. **测量条件**：需在类似的测试条件下
4. **外推限制**：不要在数据范围外使用

## 📖 相关文档

- `快速总结.md`：简明结果和推荐
- `分析报告.md`：完整的分析报告，包含详细解释

## 🔧 环境要求

```bash
Python 3.7+
numpy
pandas
matplotlib
seaborn
scikit-learn
scipy
```

安装依赖：
```bash
pip install numpy pandas matplotlib seaborn scikit-learn scipy
```

---

**分析完成时间**：2025年
**数据来源**：健身课程测试数据
**分析工具**：Python + 科学计算库
